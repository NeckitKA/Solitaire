//---------------------------------------------------------------------------

#pragma hdrstop

#include "Tableau.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
//---------------------------------------------------------------------------

Tableau::Tableau(int n, int x, int y, TForm* parentForm)
	: Stack(n, x, y, parentForm) {
}
//---------------------------------------------------------------------------

void  Tableau::SetTopCardYPos() {
	if (cards.size()>0) {
		int cardOpenCounter=0;
		for (int cardNum = cards.size() - 1; cardNum >= 0; --cardNum) {
			if (cards[cardNum]->GetCardOpen()) {
				cardOpenCounter++;
			}
			else {
				break;
			}
		}

		topCardYPosition = cards.size()*7 + Y + 1 + 25*cardOpenCounter;
	}

	else {
		topCardYPosition = cards.size()*7 + Y + 1;
	}
}
//---------------------------------------------------------------------------

void Tableau::AddCard(Card* card) {
    SetTopCardYPos();
	cards.push_back(card);

}
//---------------------------------------------------------------------------

void Tableau::AddCardsAtStart(Card* card){
	cards.push_back(card);
	SetTopCardYPos();
}
//---------------------------------------------------------------------------

void Tableau::RemoveCard() {
	cards.pop_back();
}
//---------------------------------------------------------------------------
